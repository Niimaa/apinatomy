{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6************","webpack:///webpack/bootstrap 72af599b92b9db43c53b?2d04************","webpack:///./src/circuitboard.es6.js","webpack:///./src/Artefact.es6.js?3d36","webpack:///./src/util/defer.es6.js?ee8f*","webpack:///./src/util/kefir-and-eggs.es6.js?515d","webpack:///./src/util/kefir-signal-handler.es6.js?0f01","webpack:///./src/util/main-deltajs.es6.js?d420","webpack:///./src/util/misc.es6.js?276f","webpack:///./src/util/newWidgetType.es6.js","webpack:///./src/util/unique-id.es6.js?4c89*","webpack:///external \"jquery\"?0b76*********","webpack:///external \"bluebird\"?fb3e*","webpack:///external \"kefir\"?39df","webpack:///external \"tweenjs\"?d5a5","webpack:///external \"kefir-jquery\"?46a4","webpack:///external \"delta-js\"?84b9"],"names":[],"mappings":"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","file":"circuitboard.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"jquery\"), require(\"bluebird\"), require(\"kefir\"), require(\"tweenjs\"), require(\"kefir-jquery\"), require(\"delta-js\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"jquery\", \"bluebird\", \"kefir\", \"tweenjs\", \"kefir-jquery\", \"delta-js\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"jquery\"), require(\"bluebird\"), require(\"kefir\"), require(\"tweenjs\"), require(\"kefir-jquery\"), require(\"delta-js\")) : factory(root[\"jquery\"], root[\"bluebird\"], root[\"kefir\"], root[\"tweenjs\"], root[\"kefir-jquery\"], root[\"delta-js\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function(__WEBPACK_EXTERNAL_MODULE_62__, __WEBPACK_EXTERNAL_MODULE_63__, __WEBPACK_EXTERNAL_MODULE_65__, __WEBPACK_EXTERNAL_MODULE_66__, __WEBPACK_EXTERNAL_MODULE_67__, __WEBPACK_EXTERNAL_MODULE_68__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 72af599b92b9db43c53b\n **/","define([\n\t'jquery',\n\t'bluebird',\n\t'./util/newWidgetType.es6.js',\n\t'./util/main-deltajs.es6.js'\n], function ($, P, newWidgetType, deltaJs) {\n\t'use strict';\n\n\n\t/* create $.circuitboard object if it doesn't exist */\n\t$.circuitboard = { plugin: deltaJs };\n\n\n\t/* create the classes directly circuitboard related */\n\tvar CircuitboardP = newWidgetType('Circuitboard', {\n\t\tcssClass: \"circuitboard\",\n\t\tfilter: () => P.resolve(true) // don't hide any entities\n\t});\n\tvar TilemapP = newWidgetType('Tilemap', {\n\t\tcssClass: \"tilemap\"\n\t});\n\tvar TileP = newWidgetType('Tile', {\n\t\tcssClass: \"tile\"\n\t});\n\n\n\t/* put those classes on the $.circuitboard object */\n\tCircuitboardP.then((c) => { $.circuitboard.Circuitboard = c });\n\tTilemapP.then((c) => { $.circuitboard.Tilemap = c });\n\tTileP.then((c) => { $.circuitboard.Tile = c });\n\n\n\t/*  return the static `$.circuitboard` object,         */\n\t/*  through which plugins can be applied and selected  */\n\treturn $.circuitboard;\n\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/circuitboard.es6.js\n **/","define([\n\t'jquery',\n\t'bluebird',\n\t'./util/misc.es6.js',\n\t'./util/kefir-signal-handler.es6.js',\n\t'./util/unique-id.es6.js',\n\t'./util/main-deltajs.es6.js',\n\t'./util/defer.es6.js'\n], function ($, P, U, KefirSignalHandler, uniqueID, deltaJs, defer) {\n\t'use strict';\n\n\n\treturn deltaJs.selected.then(() => {\n\n\n\t\t/* however (often) this is loaded, create the class only once */\n\t\tif (U.isDefined(window._amy_Artefact)) { return window._amy_Artefact }\n\n\n\t\t/** {@export @class Artefact @extends KefirSignalHandler}\n\t\t * Use this as a subclass (or just mix it in) to provide support for\n\t\t * events and observable properties through Kefir.js.\n\t\t *\n\t\t * Users can pass a promise through the 'beforeConstruction' option. If done, the\n\t\t * artefact waits on that promise before calling its 'construct' method.\n\t\t * Similarly, users of instances of this class should test the 'constructed' property.\n\t\t * If it is defined, it is a promise that has to be waited for.\n\t\t * If not, the object instance can be used synchronously after construction.\n\t\t */\n\t\twindow._amy_Artefact = deltaJs.vp('Artefact', U.newSubclass(KefirSignalHandler, (superFn) => function Artefact(options) {\n\t\t\tsuperFn.apply(this, arguments);\n\n\t\t\tthis._options = options;\n\t\t\tvar {id, type, parent, beforeConstruction} = options;\n\n\t\t\t/* set hierarchy stuff */\n\t\t\tthis._id = id || uniqueID(type);\n\t\t\tthis._type = type;\n\t\t\tthis._parent = parent;\n\t\t\tthis._children = [];\n\t\t\tif (parent) { U.array(parent, '_children').push(this) }\n\n\t\t\t/* create events */\n\t\t\tthis.newEvent('destroy');\n\n\t\t\t/* possibly wait for something before construction (like plugins)? */\n\t\t\tthis.beforeConstruction(beforeConstruction);\n\n\t\t\t/* give the root artefact a way to register other artefacts by ID */\n\t\t\tif (this.root === this) {\n\t\t\t\tthis._artefactsByID = {};\n\t\t\t\tthis._registerArtefact = function (artefact) {\n\t\t\t\t\tU.getDef(this._artefactsByID, artefact.id, defer).resolve(artefact);\n\t\t\t\t};\n\t\t\t}\n\n\t\t}, /** @lends Artefact.prototype */ {\n\n\t\t\t/** {@public}{@method}\n\t\t\t * Allow a promise to be inserted on which the rest of construction should wait.\n\t\t\t *\n\t\t\t * @param possiblePromise {*}  - a value that might be a promise\n\t\t\t */\n\t\t\tbeforeConstruction(possiblePromise) {\n\n\t\t\t\t/* if no promise is passed in, ignore, to keep construction synchronous */\n\t\t\t\tif (!possiblePromise || !$.isFunction(possiblePromise.then)) { return }\n\n\t\t\t\t/* if this is the first promise passed in, initialize 'this.constructed' */\n\t\t\t\tif (!this.constructed) { this.constructed = P.resolve(this) }\n\n\t\t\t\t/* insert the new promise into the chain for 'this.constructed' resolution */\n\t\t\t\tthis.constructed = this.constructed.tap(() => P.resolve(possiblePromise));\n\n\t\t\t},\n\n\t\t\t/** {@public}{@property}\n\t\t\t *\n\t\t\t * @return {Object} - the options provided through the constructor\n\t\t\t */\n\t\t\tget options() { return this._options },\n\n\t\t\t/** {@public}{@property}\n\t\t\t *\n\t\t\t * @return {String} - the unique identifier belonging to this artefact\n\t\t\t */\n\t\t\tget id() { return this._id },\n\n\t\t\t/** {@public}{@property}\n\t\t\t *\n\t\t\t * @return {String} - the type of this artefact\n\t\t\t */\n\t\t\tget type() { return this._type },\n\n\t\t\t/** {@public}{@property}\n\t\t\t *\n\t\t\t * @return {Artefact|undefined} - the parent of this artefact, unless this is the root\n\t\t\t */\n\t\t\tget parent() { return this._parent },\n\n\t\t\t/** {@public}{@property}\n\t\t\t *\n\t\t\t * @return {[Artefact]} - the children of this artefact\n\t\t\t */\n\t\t\tget children() { return this._children },\n\n\t\t\t/** {@public}{@property}\n\t\t\t *\n\t\t\t * @return {Artefact} - the root of the artefact hierarchy\n\t\t\t */\n\t\t\tget root() {\n\t\t\t\tif (!this._root) { this._root = this.parent ? this.parent.root : this }\n\t\t\t\treturn this._root;\n\t\t\t},\n\n\t\t\t/** {@public}{@method}\n\t\t\t *\n\t\t\t * Get a promise to an artefact given its ID.\n\t\t\t *\n\t\t\t * @param  id {String}   - the id of the required artefact\n\t\t\t * @return {P<Artefact>} - the promise to the artefact that has the given id\n\t\t\t */\n\t\t\tartefactById(id) {\n\t\t\t\treturn U.getDef(this.root._artefactsByID, id, defer).promise;\n\t\t\t},\n\n\t\t\t/** {@public}{@method}\n\t\t\t *\n\t\t\t * Traverse the Artefact hierarchy with this as root.\n\t\t\t *\n\t\t\t * @param fn {(Artefact) => Boolean} - the function to call on each artefact\n\t\t\t */\n\t\t\ttraverseArtefacts(fn, options = {}) {\n\t\t\t\tvar {order} = options;\n\t\t\t\tif (!order) { order = 'prefix' }\n\n\t\t\t\tif (order === 'prefix') { fn(this) }\n\t\t\t\tthis.children.forEach((child) => {\n\t\t\t\t\tchild.traverseArtefacts(fn, options);\n\t\t\t\t});\n\t\t\t\tif (order === 'postfix') { fn(this) }\n\t\t\t},\n\n\t\t\t/** {@public}{@method}\n\t\t\t *\n\t\t\t * Traverse the Artefact hierarchy with this as root.\n\t\t\t *\n\t\t\t * @param fn {(Artefact) => Boolean} - the function to call on each artefact\n\t\t\t */\n\t\t\ttraverseArtefactsByType(type, fn, options = {}) {\n\t\t\t\tvar {order} = options;\n\t\t\t\tif (!order) { order = 'prefix' }\n\n\t\t\t\tif (order === 'prefix' && this.type === type) { fn(this) }\n\t\t\t\tif (options.beforeGoingIn) { options.beforeGoingIn(this) }\n\t\t\t\tthis.closestDescendantsByType(type).forEach((descendent) => {\n\t\t\t\t\tdescendent.traverseArtefactsByType(type, fn, options);\n\t\t\t\t});\n\t\t\t\tif (options.beforeGoingOut) { options.beforeGoingOut(this) }\n\t\t\t\tif (order === 'postfix' && this.type === type) { fn(this) }\n\t\t\t},\n\n\t\t\t/** {@public}{@method}\n\t\t\t *\n\t\t\t * Retrieve the closest ancestor (parent, parent's parent, ...)\n\t\t\t * of this artefact with the given type.\n\t\t\t *\n\t\t\t * @return {Artefact|undefined} - the closest ancestor of the given type, unless there is none\n\t\t\t */\n\t\t\tclosestAncestorByType(type) {\n\t\t\t\tvar result = this;\n\t\t\t\tdo { result = result.parent } while (result && result.type && result.type !== type);\n\t\t\t\treturn result;\n\t\t\t},\n\n\t\t\t/** {@public}{@method}\n\t\t\t *\n\t\t\t * Retrieve the closest descendant (children, children's children, ...)\n\t\t\t * of this artefact with the given type.\n\t\t\t *\n\t\t\t * @return {[Artefact]} - the closest descendants of the given type; none of them\n\t\t\t *                        are descendant from any other\n\t\t\t */\n\t\t\tclosestDescendantsByType(type) {\n\t\t\t\tvar result = [];\n\t\t\t\tthis.children.forEach((child) => {\n\t\t\t\t\tif (child.type === type) {\n\t\t\t\t\t\tresult.push(child);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult = result.concat(child.closestDescendantsByType(type));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn result;\n\t\t\t},\n\n\t\t\t/** {@public}{@method}\n\t\t\t *\n\t\t\t * Indicate that this artefact will never be used again, allowing it\n\t\t\t * to do any necessary cleanup.\n\t\t\t */\n\t\t\tdestroy() {\n\t\t\t\tthis.destroyed = true; // TODO: make this a property?\n\t\t\t\tthis.trigger('destroy');\n\t\t\t\tthis.children.forEach((child) => { child.destroy() });\n\t\t\t}\n\n\t\t}));\n\n\n\t\t/** {@function Artefact.newSubclass}\n\t\t * A static convenience function for creating a subclass of {@link Artefact}.\n\t\t */\n\t\twindow._amy_Artefact.newSubclass = function newSubClass(name, constructor, prototype = {}, optionDefaults = {}) {\n\t\t\treturn deltaJs.vp(name, U.newSubclass(window._amy_Artefact, (superFn) => function (options = {}) {\n\n\t\t\t\t/* process options */\n\t\t\t\tvar processedOptions = options;\n\t\t\t\tObject.keys(optionDefaults).forEach((key) => {\n\t\t\t\t\tif (U.isUndefined(processedOptions[key])) {\n\t\t\t\t\t\tprocessedOptions[key] = optionDefaults[key];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tprocessedOptions.type = name;\n\n\t\t\t\t/* call super-constructor */\n\t\t\t\tsuperFn.call(this, U.extend(options, processedOptions));\n\n\t\t\t\t/* call this constructor */\n\t\t\t\tconstructor.call(this, processedOptions);\n\n\t\t\t\t/* then run the 'construct' method */\n\t\t\t\tif (this.constructed) { // construct asynchronously\n\t\t\t\t\tthis.constructed = this.constructed.then(() => {\n\t\t\t\t\t\tif ($.isFunction(this.construct)) {\n\t\t\t\t\t\t\treturn P.resolve(this.construct(options)).return(this);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn this;\n\t\t\t\t\t});\n\t\t\t\t} else if ($.isFunction(this.construct)) {\n\t\t\t\t\tthis.beforeConstruction(this.construct(options));\n\t\t\t\t}\n\n\t\t\t\t/* register this artefact to the circuitboard */\n\t\t\t\t(this.constructed || P.resolve()).then(() => {\n\t\t\t\t\tthis.root._registerArtefact(this);\n\t\t\t\t});\n\n\t\t\t}, U.extend({}, prototype, {\n\t\t\t\tget circuitboard() {\n\t\t\t\t\tif (!this._circuitboard) { this._circuitboard = this.closestAncestorByType('Circuitboard') }\n\t\t\t\t\treturn this._circuitboard;\n\t\t\t\t}\n\t\t\t})));\n\t\t};\n\n\n\t\treturn window._amy_Artefact;\n\n\n\t}).tap((c) => { $.circuitboard.Artefact = c });\n\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Artefact.es6.js\n **/","define(['bluebird'], function (P) {\n\t'use strict';\n\n\treturn function defer() {\n\t\tvar resolve, reject;\n\t\tvar promise = new P(function() {\n\t\t\tresolve = arguments[0];\n\t\t\treject = arguments[1];\n\t\t});\n\t\t//noinspection JSUnusedAssignment\n\t\treturn {\n\t\t\tresolve: resolve,\n\t\t\treject: reject,\n\t\t\tpromise: promise\n\t\t};\n\t};\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/util/defer.es6.js\n **/","'use strict';\n\ndefine(['jquery', './misc.es6.js', 'kefir', 'tweenjs', 'kefir-jquery'], function ($, U, Kefir, TWEEN, KefirJQuery) {\n\n\t/* Kefir jQuery plugin ********************************************************************************************/\n\n\tKefirJQuery.init(Kefir, $);\n\n\n\t/* EventStream generators *****************************************************************************************/\n\n\t// This method works with events that can have only one subscriber,\n\t// that can be un-subscribed by setting the subscriber to `null`.\n\t// This function is memoized, so only one subscription is taken,\n\t// and the same stream for it returned for each request.\n\tKefir.fromOnNull = U.memoize(function fromOnNull(obj, eventName) {\n\t\treturn Kefir.fromBinder((emitter) => {\n\t\t\tobj.on(eventName, emitter.emit);\n\t\t\treturn () => { obj.on(eventName, null) };\n\t\t});\n\t});\n\n\n\tvar requestAnimationFrameFn =\n\t\t\twindow.requestAnimationFrame       ||\n\t\t\twindow.webkitRequestAnimationFrame ||\n\t\t\twindow.mozRequestAnimationFrame    ||\n\t\t\twindow.oRequestAnimationFrame      ||\n\t\t\twindow.msRequestAnimationFrame     ||\n\t\t\t((f) => { window.setTimeout(f, 1000 / 60) });\n\tKefir.animationFrames = function animationFrames() {\n\t\treturn Kefir.fromBinder((emitter) => {\n\n\t\t\t/* self-calling animation-frame loop */\n\t\t\tvar subscribed = true;\n\t\t\t(function iterationFn() {\n\t\t\t\trequestAnimationFrameFn(() => {\n\t\t\t\t\temitter.emit();\n\t\t\t\t\tif (subscribed) { iterationFn() }\n\t\t\t\t});\n\t\t\t})();\n\n\t\t\t/* unsubscribe function */\n\t\t\treturn () => { subscribed = false };\n\n\t\t});\n\t};\n\n\n\tKefir.tween = function tween(objStart, objEnd, {duration, delay, easing}) {\n\n\t\t/* the tween */\n\t\tvar tw = new TWEEN.Tween(objStart).to(objEnd, duration);\n\n\t\t/* the returned bus */\n\t\tvar bus = Kefir.bus();\n\n\t\t/* a local function to plug in other streams, keeping track in order to 'end' the bus */\n\t\tvar addStream = (() => {\n\t\t\tvar chainedStreams = 0;\n\t\t\treturn (stream) => {\n\t\t\t\tchainedStreams += 1;\n\t\t\t\tbus.plug(stream);\n\t\t\t\tstream.onEnd(() => {\n\t\t\t\t\tchainedStreams -= 1;\n\t\t\t\t\tif (chainedStreams === 0) { bus.end() }\n\t\t\t\t});\n\t\t\t};\n\t\t})();\n\n\t\t/* main stream */\n\t\taddStream(Kefir.fromBinder((emitter) => {\n\t\t\tif (easing) { tw.easing(easing) }\n\t\t\tif (delay)  { tw.delay(delay) }\n\t\t\ttw.onUpdate(function () { emitter.emit(this) });\n\t\t\ttw.onComplete(emitter.end);\n\t\t}));\n\n\t\t/* adding tween-specific properties to the returned bus */\n\t\tbus.tween = tw;\n\t\tbus.start = () => {\n\t\t\ttw.start();\n\t\t\treturn bus;\n\t\t};\n\t\tbus.chain = (other) => {\n\t\t\taddStream(other);\n\t\t\ttw.chain(other.tween);\n\t\t\treturn bus;\n\t\t};\n\n\t\t/* returning the bus */\n\t\treturn bus;\n\n\t};\n\n\n\tKefir.keyPress = function keyPress(keyCode) {\n\t\treturn $(window).asKefirStream('keypress').filter((e) => e.keyCode === keyCode);\n\t};\n\n\n\tKefir.once = function once(value) {\n\t\treturn Kefir.fromBinder((emitter) => {\n\t\t\temitter.emit(value);\n\t\t\temitter.end();\n\t\t});\n\t\t//return Kefir.constant(value); // TODO: replace all 'once' calls with 'constant' calls; then remove 'once'\n\t};\n\n\n\tKefir.fromArray = function fromArray(array) {\n\t\treturn Kefir.fromBinder((emitter) => {\n\t\t\tarray.forEach(emitter.emit);\n\t\t\temitter.end();\n\t\t});\n\t};\n\n\n\t/* EventStream converters *****************************************************************************************/\n\n\n\t// This creates a 'window of opportunity' to limit other streams by.\n\t// This window is provided by the `pacing` observable. An optional `handler`\n\t// parameter can be given to do some setup and some breakdown. It is passed a function as an argument\n\t// that should be called *once* in the place where other streams can do their\n\t// thing. It returns a function used to wrap other streams. It does not\n\t// return a stream.\n\tKefir.limiter = function limiter(pacing, handler = U.call) {\n\t\tvar wantedBus = Kefir.bus();\n\t\tvar open =      Kefir.bus();\n\t\tvar close =     Kefir.bus();\n\n\t\t/* takes 'this' stream as pacing for a window of opportunity for other streams */\n\t\tpacing.filterBy(wantedBus.toProperty(false)).onValue(() => {\n\t\t\thandler(() => {\n\t\t\t\topen.emit();\n\t\t\t\twantedBus.emit(false);\n\t\t\t\tclose.emit();\n\t\t\t});\n\t\t});\n\n\t\t/* returns a function to wrap a stream in this wrapper */\n\t\treturn function (stream, {buffer} = {}) {\n\t\t\twantedBus.plug(stream.mapTo(true));\n\t\t\treturn Kefir.constant(true).take(1).concat(close).flatMapLatest(() => {\n\t\t\t\tvar accumulator = (arr, val) => (buffer ? arr.concat([val]) : [val]);\n\t\t\t\treturn stream.takeUntilBy(open).reduce(accumulator, []).flatMap(Kefir.fromArray);\n\t\t\t});\n\t\t};\n\t};\n\n\t// This restricts a given stream to a wrapper stream created with the method above.\n\t// All its original events are now fired inside the provided window. Set `options.buffer`\n\t// to `true` if all its events should be buffered and released inside the next window.\n\t// Otherwise, only the last event is retained.\n\tKefir.Observable.prototype.limitedBy = function limitedBy(wrapper, options) {\n\t\treturn wrapper(this, options);\n\t};\n\n\n\t// convert to a stream of 1-or-2 element arrays;\n\t// the first is just the element at that point in the stream\n\t// the second is the previous element in the stream, if there is one\n\tKefir.Observable.prototype.newOld = function newOld() {\n\t\treturn Kefir.fromArray([null, null]).concat(this).slidingWindow(2).map(([a, b]) => [b, a]);\n\t};\n\n\n\n\t// This is a cheap version of the limiter defined above. TODO: use the limiter where this is now used\n\tKefir.Stream.prototype.holdUntil = function holdUntil(pacing) {\n\t\treturn Kefir.fromBinder((emitter) => {\n\t\t\tvar buffer = [];\n\t\t\tvar unsubscribeToThis = this.onValue((value) => {\n\t\t\t\tbuffer.push(value);\n\t\t\t});\n\t\t\tvar unsubscribeToPacing = pacing.onValue(() => {\n\t\t\t\tif (buffer.length > 0) {\n\t\t\t\t\tvar oldBuffer = buffer;\n\t\t\t\t\tbuffer = [];\n\t\t\t\t\toldBuffer.forEach(emitter.emit);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn () => {\n\t\t\t\tunsubscribeToThis();\n\t\t\t\tunsubscribeToPacing();\n\t\t\t\tbuffer = null;\n\t\t\t};\n\t\t});\n\t};\n\n\t// This filters an observable to only let through values equal to the given value.\n\tKefir.Observable.prototype.value = function (value, comparator) {\n\t\tcomparator = comparator || (e => e === value);\n\t\treturn this.skipDuplicates().filter(comparator);\n\t};\n\n\t// This makes a subscription to an observable that doesn't do anything\n\tKefir.Observable.prototype.run = function () {\n\t\tvar doNothing = ()=>{};\n\t\tthis.onValue(doNothing);\n\t\treturn () => { this.offValue(doNothing) };\n\t};\n\n\t// This is a 'smart' .stopPropagation, marking events with a label\n\t// and skipping those that already have that label.\n\tKefir.Stream.prototype.skipPropagation = function (label) {\n\t\treturn this.filter((event) => {\n\t\t\treturn !U.array(event.originalEvent, '_onlyOnceFor')[label];\n\t\t}).map((event) => {\n\t\t\tU.array(event.originalEvent, '_onlyOnceFor')[label] = true;\n\t\t});\n\t};\n\n\t// Filter events to only certain keys / buttons. Can be a predicate function or single number.\n\tKefir.Stream.prototype.which = function (buttonId) {\n\t\tvar pred = (typeof buttonId === 'function') ? (buttonId) : (b => b === buttonId);\n\t\treturn this.filter((e) => pred(e.which));\n\t};\n\n\n\t/* EventStream generators *****************************************************************************************/\n\n\t$.fn.mouseDrag = function mouseDrag({threshold} = {}) {\n\t\treturn $(this).asKefirStream('mousedown').flatMap((mouseDownEvent) => {\n\t\t\tvar stream = $(document).asKefirStream('mousemove');\n\t\t\tif (threshold) {\n\t\t\t\tvar crossed = false;\n\t\t\t\tstream = stream.filter((mouseMoveEvent) => { // TODO: don't use 'filter', but something like 'skipUntil' or 'flatMap'\n\t\t\t\t\tif (crossed) { return true }\n\t\t\t\t\tvar dx = mouseDownEvent.pageX - mouseMoveEvent.pageX;\n\t\t\t\t\tvar dy = mouseDownEvent.pageY - mouseMoveEvent.pageY;\n\t\t\t\t\tif (dx * dx + dy * dy > threshold * threshold) { return crossed = true }\n\t\t\t\t\treturn false;\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn stream\n\t\t\t\t\t.takeUntilBy($(document).asKefirStream('mouseup'))\n\t\t\t\t\t.map((mouseMoveEvent) => ({ mouseDownEvent, mouseMoveEvent }));\n\t\t});\n\t};\n\n\t$.fn.mouseClick = function mouseClick({threshold} = {}) {\n\t\treturn $(this).asKefirStream('mousedown').flatMap((mouseDownEvent) => {\n\t\t\tvar untilStream = $(document).asKefirStream('mousemove');\n\t\t\tif (threshold) {\n\t\t\t\tvar crossed = false;\n\t\t\t\tuntilStream = untilStream.filter((mouseMoveEvent) => {\n\t\t\t\t\tif (crossed) { return true }\n\t\t\t\t\tvar dx = mouseDownEvent.pageX - mouseMoveEvent.pageX;\n\t\t\t\t\tvar dy = mouseDownEvent.pageY - mouseMoveEvent.pageY;\n\t\t\t\t\tif (dx * dx + dy * dy > threshold * threshold) { return crossed = true }\n\t\t\t\t\treturn false;\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn $(document).asKefirStream('mouseup').take(1).takeUntilBy(untilStream);\n\t\t});\n\t};\n\n\t$.fn.mouseWheel = function mouseWheel() {\n\t\treturn $(this).asKefirStream('mousewheel DOMMouseScroll');\n\t};\n\n\n\treturn Kefir;\n\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/util/kefir-and-eggs.es6.js\n **/","'use strict';\n\ndefine(['jquery', './misc.es6.js', './kefir-and-eggs.es6.js'], function ($, U, Kefir) {\n\n\n\t/** {@export}{@class KefirSignalHandler}\n\t * Use this as a subclass (or just mix it in) to provide support for\n\t * events and observable properties through Kefir.js.\n\t */\n\tvar KefirSignalHandler = class KefirSignalHandler {\n\n\t\tconstructor() {\n\t\t\tthis._events = {};\n\t\t\tthis._properties = {};\n\t\t\tthis._propertyBusses = {};\n\t\t}\n\n\t\t/** {@public}{@method}\n\t\t * Declares a new event stream for this object.\n\t\t *\n\t\t * @param  {String}        name    - the name of the event, used to trigger or subscribe to it\n\t\t * @param  {Kefir.Stream} [source] - another event stream to automatically trigger this event\n\t\t *\n\t\t * @return {Kefir.Bus} - the created event stream\n\t\t */\n\t\tnewEvent(name, {source} = {}) {\n\n\t\t\t/* is the event name already taken? */\n\t\t\tU.assert(!this._events[name],\n\t\t\t\t\t`There is already an event '${name}' on this object.`);\n\t\t\tU.assert(!this._properties[name],\n\t\t\t\t\t`There is already a property '${name}' on this object.`);\n\n\t\t\t/* define the event stream */\n\t\t\tvar bus = Kefir.bus();\n\t\t\tif (source) { bus.plug(source) }\n\t\t\treturn this._events[name] = bus;\n\n\t\t}\n\n\n\t\t/** {@public}{@method}\n\t\t * Retrieve an event stream by name. If the name of a property is given, a stream\n\t\t * based on changes to that property is returned.\n\t\t *\n\t\t * @param  {String}  name - the name of the event stream to retrieve\n\t\t * @return {Kefir.Stream} - the event stream associated with the given name\n\t\t */\n\t\tevent(name) {\n\n\t\t\t/* does the event exist? */\n\t\t\tU.assert(this._events[name],\n\t\t\t\t\t`There is no event '${name}' on this object.`);\n\n\t\t\t/* return it */\n\t\t\treturn this._events[name];\n\n\t\t}\n\n\n\t\t/** {@public}{@method}\n\t\t * Retrieve a property by name.\n\t\t *\n\t\t * @param  {String} name - the name of the property to retrieve\n\t\t * @return {Kefir.Property} - the property associated with the given name\n\t\t */\n\t\tproperty(name) { return this._properties[name] }\n\n\t\t/** @alias property */\n\t\tp(name) { return this._properties[name] }\n\n\n\t\t/** {@public}{@method}\n\t\t * This method defines a new property on this object.\n\t\t *\n\t\t * @param  {String}                   name           - the name of the event stream to retrieve\n\t\t * @param  {Boolean}                 [settable=true] - whether the value can be manually set\n\t\t * @param  {*}                       [initial]       - the initial value of this property\n\t\t * @param  {function(*,*):Boolean}   [isEqual]       - a predicate function by which to test for duplicate values\n\t\t *\n\t\t * @return {Kefir.Property} - the property associated with the given name\n\t\t */\n\t\tnewProperty(name, {settable, initial, isEqual} = {}) {\n\n\t\t\t/* is the property name already taken? */\n\t\t\tU.assert(!this._events[name],\n\t\t\t\t\t`There is already an event '${name}' on this object.`);\n\t\t\tU.assert(!this._properties[name],\n\t\t\t\t\t`There is already a property '${name}' on this object.`);\n\n\t\t\t/* default value for 'settable' */\n\t\t\tif (U.isUndefined(settable)) { settable = true }\n\n\t\t\t/* define the bus which manages the property */\n\t\t\tvar bus = Kefir.bus();\n\n\t\t\t/* define the property itself, and give it additional methods */\n\t\t\tvar property = this._properties[name] = bus.toProperty(initial).skipDuplicates(isEqual);\n\t\t\tproperty.plug   = (observable) => { bus.plug(observable);   return property };\n\t\t\tproperty.unplug = (observable) => { bus.unplug(observable); return property };\n\t\t\tproperty.get = () => property._current; // TODO: accessing private field of Kefir property; don't\n\t\t\tif (settable) {\n\t\t\t\tproperty.set = (value) => { bus.emit(value); return property };\n\t\t\t}\n\n\t\t\t/* add the property to the object interface */\n\t\t\tObject.defineProperty(this, name, {\n\t\t\t\tget: property.get,\n\t\t\t\tset: settable ? property.set : undefined\n\t\t\t});\n\n\t\t\t/* make the property active; it doesn't work if this isn't done (the nature of Kefir.js) */\n\t\t\tproperty.run();\n\t\t\tif (this._events['destroy']) {\n\t\t\t\tthis.event('destroy').onValue(() => { bus.end() });\n\t\t\t}\n\n\t\t\t/* return the property */\n\t\t\treturn property;\n\n\t\t}\n\n\n\t\t/** {@public}{@method}\n\t\t * Trigger an event for all subscribers.\n\t\t *\n\t\t * @param {String} name  - the name of the event stream to trigger\n\t\t * @value {*}      value - the value to attach to the event\n\t\t */\n\t\ttrigger(name, value) {\n\n\t\t\t/* does the event stream exist? */\n\t\t\tU.assert(this._events[name],\n\t\t\t\t\t`There is no event '${name}' on this object.`);\n\n\t\t\t/* push the value to the stream */\n\t\t\tthis._events[name].emit(value);\n\n\t\t}\n\n\n\t\t/** {@public}{@method}\n\t\t * This method selects an existing stream or property, and then\n\t\t * either returns it, or creates a subscription to it, depending\n\t\t * on whether a callback is provided.\n\t\t *\n\t\t * @param {String}            name                 - the name of the event or property to subscribe to\n\t\t * @param {*}                [expectedValue]       - if provided, filters the stream by === equality with this value;\n\t\t *                                                   this may not be a plain object\n\t\t * @param {Object}           [options]             - a plain object for providing additional options\n\t\t * @param {Boolean}          [options.once=false]  - whether the stream ends after one event\n\t\t * @param {function(*):void} [callback]            - if provided, subscribes to this stream with the this callback\n\t\t *\n\t\t * @return {Kefir.Observable|function():undefined} - if no `callback` is provided, the specified event stream\n\t\t *                                                   or property; otherwise, a function to unsubscribe to said\n\t\t *                                                   stream or property\n\t\t */\n\t\ton(name, expectedValue, options, callback) {\n\t\t\tvar argsObj = this._gatherOnArguments(name, expectedValue, options, callback);\n\t\t\treturn this._on(argsObj);\n\t\t}\n\n\n\t\t/** {@private}{@method}\n\t\t * This method does the main work for {@link on}, but accepts\n\t\t * the parameters as one object, so it doesn't have to deal with parameter ordering.\n\t\t *\n\t\t * @return {Kefir.Observable|function():void}\n\t\t */\n\t\t_on({name, expectedValue, callback}) {\n\t\t\t/* does an event or property by this name exist? */\n\t\t\tU.assert(this._events[name] || this._properties[name],\n\t\t\t\t\t`There is no event or property '${name}' on this object.`);\n\n\t\t\t/* process name */\n\t\t\tvar result = this._events[name] || this._properties[name];\n\n\t\t\t/* process expectedValue */\n\t\t\tif (U.isDefined(expectedValue)) { result = result.filter((v) => v === expectedValue) }\n\n\t\t\t/* process callback */\n\t\t\tif (callback) { result = result.onValue(callback) }\n\n\t\t\treturn result;\n\t\t}\n\n\n\t\t/** {@private}{@method}\n\t\t * Process the arguments accepted by {@link on}.\n\t\t *\n\t\t * @return {Object}\n\t\t */\n\t\t_gatherOnArguments(...args) {\n\t\t\tvar result = { name: args.shift() };\n\n\t\t\t/* test for expected value argument */\n\t\t\tif (U.isDefined(args[0]) && !U.isFunction(args[0]) && !U.isPlainObject(args[0])) {\n\t\t\t\tresult.expectedValue = args.shift();\n\t\t\t}\n\n\t\t\t/* test for callback function */\n\t\t\tif (U.isDefined(args[0]) && U.isFunction(args[0])) {\n\t\t\t\tresult.callback = args.shift();\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t};\n\n\n\treturn KefirSignalHandler;\n\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/util/kefir-signal-handler.es6.js\n **/","define(['bluebird', 'delta-js', './defer.es6.js'], function (P, DeltaJs, defer) {\n\t'use strict';\n\n\n\t/* already cached? */\n\tif (window.__apinatomy_core_deltajs) { return window.__apinatomy_core_deltajs }\n\n\n\t/* set the cache */\n\tvar deltaJs = window.__apinatomy_core_deltajs = new DeltaJs();\n\tvar deferred = defer();\n\tdeltaJs.selected = deferred.promise;\n\tvar oldSelect = deltaJs.select;\n\tdeltaJs.select = function (...args) {\n\t\toldSelect.apply(this, args);\n\t\tdeferred.resolve(args);\n\t};\n\n\n\t/* return the delta model that manages all plugins (= deltas) */\n\treturn window.__apinatomy_core_deltajs;\n\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/util/main-deltajs.es6.js\n **/","define(['bluebird', './defer.es6.js'], (P, defer) => {\n\t'use strict';\n\n\tvar U = {\n\n\t\t//// create a new class, given a constructor and possible prototype\n\t\t//newClass(constructor, prototype = {}) {\n\t\t//\tconstructor.prototype = prototype;\n\t\t//\tconstructor.prototype.constructor = constructor;\n\t\t//\treturn constructor;\n\t\t//}, // Already made redundant by ES6; TODO: do same for `newSubclass`\n\n\t\t// create a new subclass, given a superclass, constructor and possible prototype\n\t\tnewSubclass(superClass, constructorMaker, prototype = {}) {\n\t\t\tvar constructor = constructorMaker(superClass.prototype.constructor);\n\t\t\tconstructor.prototype = Object.create(superClass.prototype);\n\t\t\tU.extend(constructor.prototype, prototype);\n\t\t\tconstructor.prototype.constructor = constructor;\n\t\t\treturn constructor;\n\t\t},\n\n\t\t// extend the first passed object with the properties\n\t\t// of the other objects, from left to right, and returns\n\t\t// the first passed object\n\t\textend(obj1, ...rest) {\n\t\t\trest.forEach((obj) => {\n\t\t\t\tfor (var key in obj) {\n\t\t\t\t\tif (obj.hasOwnProperty(key)) {\n\t\t\t\t\t\tObject.defineProperty(obj1, key, Object.getOwnPropertyDescriptor(obj, key));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn obj1;\n\t\t},\n\n\t\t// create a function that returns the value of\n\t\t// a specific field from a given object\n\t\tfield(name) { return (obj) => { return obj[name] } },\n\n\t\t// create a function that returns the value of\n\t\t// a specific field from a given object\n\t\tcall(fn, ...args) { return fn.apply(undefined, args) },\n\n\t\t// a function that returns its first argument\n\t\tid(v) { return v },\n\n\t\t// get the object `obj[name]`; if `obj[name]` is not\n\t\t// defined, give it a default value first; if the given value\n\t\t// is a function, it is called, and its result is used\n\t\tgetDef(obj, name, value) {\n\t\t\tif (U.isUndefined(obj[name])) {\n\t\t\t\tif (typeof value === 'function') { value = value() }\n\t\t\t\tobj[name] = value;\n\t\t\t}\n\t\t\treturn obj[name];\n\t\t},\n\n\t\t// get the object `obj[name]`; if `obj[name]` is not\n\t\t// a (plain) object, make it an empty object first\n\t\tobject(obj, name) { return U.getDef(obj, name, {}) },\n\n\t\t// get the array `obj[name]`; if `obj[name]` is not\n\t\t// an array, make it an empty array first\n\t\tarray(obj, name) { return U.getDef(obj, name, []) },\n\n\t\t// pull a value from an array\n\t\tpull(arr, val) {\n\t\t\tvar i = arr.indexOf(val);\n\t\t\tif (i !== -1) { arr.splice(i) }\n\t\t},\n\n\t\t// empty out an array\n\t\tmakeEmpty(arr) {\n\t\t\twhile (arr.length > 0) { arr.pop() }\n\t\t},\n\n\t\t// `Function.bind`, but taking an array like `Function.apply` does\n\t\tbindA(fn, ctx, args) { return fn.bind.apply(fn, [ctx].concat(args)) },\n\n\t\t// `Function.bind`, but only having to specify the context-object once\n\t\tbind(obj, m, ...args) { return U.bindA(obj[m], obj, args) },\n\n\t\t// allows the Function constructor to be used\n\t\t// with an array of formal parameters\n\t\tapplyConstructor(ConstructorFn, args) {\n\t\t\tvar NewConstructorFn = ConstructorFn.bind.apply(ConstructorFn, [null].concat(args));\n\t\t\treturn new NewConstructorFn();\n\t\t},\n\n\t\t// a simple `assert` function, to express a\n\t\t// condition that is expected to be true\n\t\tassert(condition, message) {\n\t\t\tif (!condition) { throw new Error(message || \"Assertion failed\") }\n\t\t},\n\n\t\t// test if a value is `undefined`\n\t\tisUndefined(val) { return typeof val === 'undefined' },\n\n\t\t// test if a value is defined (not `undefined`)\n\t\tisDefined(val) { return typeof val !== 'undefined' },\n\n\t\t// test if a value is a plain object\n\t\tisPlainObject(val) { return typeof val === 'object' && val.constructor === Object },\n\n\t\t// test if a value is a function\n\t\tisFunction(val) { return typeof val === 'function' },\n\n\t\t// extract an array of values from an object\n\t\tobjValues(obj) { return Object.keys(obj).map(key => obj[key]) },\n\n\t\t// enable an HTML element to serve as anchor for absolutely positioned children\n\t\tmakePositioned(element) {\n\t\t\tif (element.css('position') === 'static') {\n\t\t\t\telement.css('position', 'relative');\n\t\t\t}\n\t\t},\n\n\t\t// return the first parameter that is not 'undefined'\n\t\tdefOr(...values) {\n\t\t\tfor (var i = 0; i < values.length; i += 1) {\n\t\t\t\tif (U.isDefined(values[i])) { return values[i] }\n\t\t\t}\n\t\t},\n\n\t\t// Returns a function, that, as long as it continues to be invoked, will not\n\t\t// be triggered. The function will actually be invoked after it stops being called\n\t\t// for N milliseconds. Every invocation returns a promise to the eventual result.\n\t\tdebounce(func, wait, context) {\n\t\t\tvar timeout;\n\t\t\tvar deferred = defer();\n\t\t\treturn function (...args) {\n\t\t\t\tvar laterFn = () => {\n\t\t\t\t\ttimeout = null;\n\t\t\t\t\tdeferred.resolve(func.apply(context || this, args));\n\t\t\t\t\tdeferred = defer();\n\t\t\t\t};\n\t\t\t\tclearTimeout(timeout);\n\t\t\t\ttimeout = setTimeout(laterFn, wait);\n\t\t\t\treturn deferred.promise;\n\t\t\t};\n\t\t},\n\n\t\t// Returns a function, that will only be triggered once per synchronous 'stack'.\n\t\toncePerStack(func, context) {\n\t\t\tvar notRunYet = true;\n\t\t\tvar result = function (...args) {\n\t\t\t\tif (notRunYet) {\n\t\t\t\t\tnotRunYet = false;\n\t\t\t\t\tsetTimeout(() => { notRunYet = true }, 0);\n\t\t\t\t\tfunc.apply(context || this, args);\n\t\t\t\t}\n\t\t\t};\n\t\t\tresult.allowAdditionalCall = () => {\n\t\t\t\tnotRunYet = true;\n\t\t\t};\n\t\t\treturn result;\n\t\t},\n\n\t\t/*  Create a new cache to manage a specific value that is costly to compute or retrieve.    */\n\t\t/*  It ensures that the retrieval function is not called only once per stack, and uses a    */\n\t\t/*  cache to return a known value in between. It is also able to notify you when the value  */\n\t\t/*  has actually changed. It does so using `===` comparison, but you can provide your own   */\n\t\t/*  comparison function.                                                                    */\n\t\tcached({retrieve, isEqual}) {\n\n\t\t\t/* normalize parameters */\n\t\t\tisEqual = isEqual || ((a, b) => (a === b));\n\n\t\t\t/* keep a cache and give it an initial value */\n\t\t\tvar cache;\n\n\t\t\t/* how to retrieve a new value, and process it if it is new */\n\t\t\tfunction retrieveValue() {\n\t\t\t\tvar newValue = retrieve();\n\t\t\t\tvar oldValue = cache;\n\t\t\t\tif (!isEqual(newValue, oldValue)) {\n\t\t\t\t\tcache = newValue;\n\t\t\t\t\tonChange.forEach((fn) => fn(newValue, oldValue));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/* retrieve a value at most once per stack */\n\t\t\tvar oncePerStackSetValue = U.oncePerStack(retrieveValue);\n\n\t\t\t/*  the resulting function possibly performs retrieval,             */\n\t\t\t/*  and always returns the cache (which may contain the new value)  */\n\t\t\tvar resultFn = () => {\n\t\t\t\toncePerStackSetValue();\n\t\t\t\treturn cache;\n\t\t\t};\n\n\t\t\t/* allow an onChange callback to be set */\n\t\t\tvar onChange = [];\n\t\t\tresultFn.onChange = (cb) => {\n\t\t\t\tonChange.push(cb);\n\t\t\t\treturn resultFn;\n\t\t\t};\n\n\t\t\t/* allow breaking of the cache, allowing multiple calls per stack */\n\t\t\tresultFn.allowAdditionalCall = () => {\n\t\t\t\toncePerStackSetValue.allowAdditionalCall();\n\t\t\t};\n\n\t\t\t/* retrieve the first value right now */\n\t\t\toncePerStackSetValue();\n\n\t\t\treturn resultFn;\n\t\t},\n\n\t\tpromisify(obj, method) {\n\t\t\treturn function (...args) {\n\t\t\t\treturn new P((resolve, reject) => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tobj[method].apply(obj, args.concat(resolve));\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\treject(error);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\t\t},\n\n\t\tfindIndex(array, pred) {\n\t\t\tfor (var i = 0; i < array.length; ++i) {\n\t\t\t\tif (pred(array[i], i, array)) { return i }\n\t\t\t}\n\t\t\treturn -1;\n\t\t},\n\n\t\t// this `memoize` function is SLOW, as it uses linear search\n\t\tmemoize(fn) {\n\t\t\tvar keys = [];\n\t\t\tvar cache = [];\n\t\t\treturn function (...args) {\n\t\t\t\t/* check the cache */\n\t\t\t\tvar index = U.findIndex(keys, (key) => key.every((v, i) => v === args[i]));\n\t\t\t\tif (index >= 0) { return cache[index] }\n\n\t\t\t\t/* no cache hit; compute value, store and return */\n\t\t\t\tvar result = fn.apply(this, args);\n\t\t\t\tkeys.push(args);\n\t\t\t\tcache.push(result);\n\t\t\t\treturn result;\n\t\t\t};\n\t\t},\n\n\t\tgetQueryVariable(variable) {\n\t\t\tlet query = window.location.search.substring(1);\n\t\t\tlet vars = query.split('&');\n\t\t\tfor (let i = 0; i < vars.length; ++i) {\n\t\t\t\tlet pair = vars[i].split('=');\n\t\t\t\tif(pair[0] === variable) { return pair[1] }\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t};\n\n\n\tvar EPS = 0.000001;\n\tvar sortOfEqual = (a, b) => (b - EPS < a && a < b + EPS);\n\n\t/* HTML element position */\n\tU.Position = class Position {\n\t\tconstructor(top, left) {\n\t\t\tthis.top = top;\n\t\t\tthis.left = left;\n\t\t}\n\t};\n\tU.Position.subtract = (a, b) => {\n\t\treturn new U.Position(a.top - b.top, a.left - b.left);\n\t};\n\tU.Position.equals = (a, b) => {\n\t\treturn U.isDefined(a) && U.isDefined(b) && sortOfEqual(a.top, b.top) && sortOfEqual(a.left, b.left);\n\t};\n\n\n\t/* HTML element size */\n\tU.Size = class Size {\n\t\tconstructor(height, width) {\n\t\t\tthis.height = height;\n\t\t\tthis.width = width;\n\t\t}\n\t};\n\tU.Size.equals = (a, b) => {\n\t\treturn U.isDefined(a) && U.isDefined(b) && sortOfEqual(a.height, b.height) && sortOfEqual(a.width, b.width);\n\t};\n\n\n\treturn U;\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/util/misc.es6.js\n **/","define(['jquery', 'bluebird', './misc.es6.js', '../Artefact.es6.js', './kefir-and-eggs.es6.js'], function ($, P, U, ArtefactP) {\n\t'use strict';\n\n\n\t/*  a function to create an apinatomy component (widget)          */\n\t/*  as a jQuery element plugin; this is returned from the module  */\n\tfunction newWidgetType(typeName, optionDefaults = {}) {\n\n\t\t/* the specific widget class */\n\t\tvar WidgetP = ArtefactP.then((Artefact) => Artefact.newSubclass(typeName, function ({cssClass}) {\n\n\t\t\t/* set the element CSS class */\n\t\t\tif (U.isDefined(cssClass)) { this.element.addClass(cssClass) }\n\n\t\t\t/* if the jquery element is removed, destroy the artefact */\n\t\t\tthis.element.asKefirStream('remove').onValue(() => { this.destroy() });\n\n\t\t\tthis.element.data('artefact', this);\n\n\t\t}, {\n\n\t\t\tget model() { return this.options.model },\n\n\t\t\tget element() { return this.options.element }\n\n\t\t}, U.extend({\n\n\t\t\tbeforeConstruction: P.resolve() // guarantee all widget construction to be asynchronous\n\n\t\t}, optionDefaults)));\n\n\t\t/* create a lowercase name for this widget type */\n\t\tvar lowercaseName = typeName[0].toLowerCase() + typeName.slice(1);\n\n\t\t/* jQuery plugin: the widget creation & retrieval function  */\n\t\t$.fn[lowercaseName] = function (options) {\n\n\t\t\t/* if the word 'instance' is passed, return the (already created) widget promise */\n\t\t\tif (options === 'instance') { return this.data(`-amy-${lowercaseName}`) }\n\n\t\t\t/* else, create a new widget and set a promise to it */\n\t\t\tthis.data(`-amy-${lowercaseName}`, WidgetP\n\t\t\t\t\t.then((Widget) => new Widget(U.extend(options, { element: this })).constructed));\n\n\t\t\t/* return the jQuery element instance, by jQuery convention */\n\t\t\treturn this;\n\n\t\t};\n\n\t\t/* return a promise to the widget artefact class */\n\t\treturn WidgetP;\n\n\t}\n\n\n\t/* expose the widget class creator function */\n\treturn newWidgetType;\n\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/util/newWidgetType.es6.js\n **/","define([], function () {\n\t'use strict';\n\n\tvar _nextId = 0;\n\n\treturn function uniqueId(prefix) {\n\t\treturn `${prefix||\"unique-id\"}-${_nextId++}`;\n\t};\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/util/unique-id.es6.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_62__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"jquery\"\n ** module id = 62\n ** module chunks = 2 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 22 23 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_63__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"bluebird\"\n ** module id = 63\n ** module chunks = 1 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 47 49 50 51 52 53 54 55 56 58 59 60\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_65__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"kefir\"\n ** module id = 65\n ** module chunks = 12 13 14 15 16 18 19 22 23 25 26 28 29 31 33 34 36 37 38 39 41 42 47 49 50 51 52 53 56 59 60\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_66__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"tweenjs\"\n ** module id = 66\n ** module chunks = 12 13 14 15 16 18 19 22 23 25 26 27 28 29 31 33 34 36 37 38 39 41 42 47 49 50 51 52 53 56 59 60\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_67__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"kefir-jquery\"\n ** module id = 67\n ** module chunks = 12 13 14 15 16 18 19 22 23 25 26 28 29 31 33 34 36 37 38 39 41 42 47 49 50 51 52 53 56 59 60\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_68__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"delta-js\"\n ** module id = 68\n ** module chunks = 12 13 14 15 16 20 23 26 29 49 50 60\n **/"],"sourceRoot":""}
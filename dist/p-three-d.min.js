!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("jquery"),require("three-js"));else if("function"==typeof define&&define.amd)define(["jquery","three-js"],t);else{var n="object"==typeof exports?t(require("jquery"),require("three-js")):t(e.jQuery,e.THREE);for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(this,function(e,t){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var r,i;r=[n(1),n(2),n(3),n(4),n(5),n(6)],i=function(e,t,n){"use strict";function r(){var t;try{return t=e("<canvas>"),!(!t[0].getContext("webgl")&&!t[0].getContext("experimental-webgl"))}catch(n){return!1}finally{t=void 0}}function i(e,t){return e&&t&&e.width===t.width&&e.height===t.height}var o=new t.Plane(new t.Vector3(0,0,1),0),a=new t.Projector,s=e.circuitboard.plugin({name:"three-d",requires:["position-tracking"]}).modify("Circuitboard.prototype");s.insert("construct",function(){var t=this;if(!r())return void console.warn("This browser doesn't seem to have WebGL support.");n.observable(this,{name:"threeDCanvasElement"}),this.on("threeDCanvasElement",function(e,t){t&&t.removeClass("three-d-canvas"),e&&e.addClass("three-d-canvas")}),Object.defineProperty(this,"threeDMode",{get:function(){return!!this.threeDCanvasElement},set:function(e){if(e)throw new Error("You cannot turn on 3D mode through the 'threeDMode' property. Do so by setting the 'threeDCanvasElement'.");this.threeDCanvasElement=null}}),this.on("threeDCanvasElement",function(e,n){(e||n)&&t.trigger("threeDMode",!!e)});var o=n.cached({retrieve:function(){return t.threeDCanvasElement&&{width:t.threeDCanvasElement.width(),height:t.threeDCanvasElement.height()}},isEqual:i});Object.defineProperty(this,"threeDCanvasSize",{get:function(){return o()}}),o.onChange(function(e){t.trigger("threeDCanvasSize",e)}),e(window).resize(o),n.observable(this,{name:"threeDControlsEnabled"}),this.on("threeDMode",function(e){e&&t._p_threeD_initialize()}),this.threeDCanvasElement=this.options.threeDCanvasElement}),s.add("_p_threeD_initialize",function(){var r=this;this._p_threeD_initialMargin={},this._p_threeD_initialMargin.left=this.element.offset().left-this.threeDCanvasElement.offset().left,this._p_threeD_initialMargin.top=this.element.offset().top-this.threeDCanvasElement.offset().top,this._p_threeD_initialMargin.right=this.threeDCanvasSize.width-this.size.width-this._p_threeD_initialMargin.left,this._p_threeD_initialMargin.bottom=this.threeDCanvasSize.height-this.size.height-this._p_threeD_initialMargin.top,this._p_threeD_scene=new t.Scene,this._p_threeD_camera=new t.PerspectiveCamera(60,this.threeDCanvasSize.width/this.threeDCanvasSize.height,1,1e4),this.on("threeDCanvasSize",function(e){r._p_threeD_camera.aspect=e.width/e.height}),this._p_threeD_camera.position.z=1;var i=new t.AmbientLight(1052720);this._p_threeD_scene.add(i);var o=new t.DirectionalLight(16772829);o.position.set(1,-1,1),this._p_threeD_scene.add(o);var a=new t.DirectionalLight(16772829);a.position.set(-1,1,-1),this._p_threeD_scene.add(a),this._p_threeD_renderer_webgl=new t.WebGLRenderer({alpha:!0,antialias:!0}),this._p_threeD_renderer_webgl.sortObjects=!1,this._p_threeD_renderer_webgl.setSize(this.threeDCanvasElement.width(),this.threeDCanvasElement.height()),this.on("3d-render",function(){r._p_threeD_renderer_webgl.render(r._p_threeD_scene,r._p_threeD_camera)}),this.on("threeDCanvasSize",function(e){r._p_threeD_renderer_webgl.setSize(e.width,e.height)}),this._p_threeD_renderer_css=new t.CSS3DRenderer,e(this._p_threeD_renderer_css.domElement).append(this._p_threeD_renderer_webgl.domElement),this.threeDCanvasElement.append(this._p_threeD_renderer_css.domElement),this._p_threeD_renderer_css.setSize(this.threeDCanvasElement.width(),this.threeDCanvasElement.height()),this.on("3d-render",function(){r._p_threeD_renderer_css.render(r._p_threeD_scene,r._p_threeD_camera)}),this.on("threeDCanvasSize",function(e){r._p_threeD_renderer_css.setSize(e.width,e.height)}),this.on("size",function(){r.trigger("3d-render")}),n.eachAnimationFrame(function(){r.trigger("3d-render")}),this._p_threeD_controls=new t.TrackballControls(this._p_threeD_camera,this.threeDCanvasElement[0]),e.extend(this._p_threeD_controls,{rotateSpeed:1,zoomSpeed:1.2,panSpeed:.8,noZoom:!1,noPan:!1,staticMoving:!0,dynamicDampingFactor:.3,keys:[65,83,68]}),this._p_threeD_controls.addEventListener("change",function(){r.trigger("3d-render")}),this.on("size",function(){r._p_threeD_controls.handleResize()}),this.on("3d-render",function(){r._p_threeD_controls.update()}),this.on("threeDControlsEnabled",function(e){r._p_threeD_controls.enabled=e});var s=this.element;this._p_threeD_circuitboard=new t.CSS3DObject(s[0]),s.css({left:0,top:0,bottom:0,right:0}),s.css("backfaceVisibility","hidden"),this._p_threeD_scene.add(this._p_threeD_circuitboard);var c=e("<div>").css({position:"absolute",border:"solid 1px black",backfaceVisibility:"hidden"}),h=new t.CSS3DObject(c[0]);h.rotation.set(Math.PI,0,0),this._p_threeD_scene.add(h);var p=function(){var e={width:r.threeDCanvasSize.width-r._p_threeD_initialMargin.left-r._p_threeD_initialMargin.right,height:r.threeDCanvasSize.height-r._p_threeD_initialMargin.top-r._p_threeD_initialMargin.bottom};s.css(e),c.css(e),h.position.x=r._p_threeD_circuitboard.position.x=.5*(r._p_threeD_initialMargin.left-r._p_threeD_initialMargin.right),h.position.y=r._p_threeD_circuitboard.position.y=.5*(r._p_threeD_initialMargin.bottom-r._p_threeD_initialMargin.top),r._p_threeD_controls.setCameraDistance(r.threeDCanvasSize.height/(2*Math.tan(t.Math.degToRad(r._p_threeD_camera.fov)/2)))};this.on("threeDCanvasSize",p),p()}),s.add("translatePositionFromCanvasToCircuitboard",function(e){this._p_threeD_camera.updateMatrixWorld(),this._p_threeD_camera.updateProjectionMatrix();var n=new t.Vector3;n.x=e.left/this.threeDCanvasSize.width*2-1,n.y=-e.top/this.threeDCanvasSize.height*2+1,n.z=.5,a.unprojectVector(n,this._p_threeD_camera);var r=new t.Ray(this._p_threeD_camera.position,n.sub(this._p_threeD_camera.position).normalize()),i=r.intersectPlane(o);return i?{left:i.x+this.threeDCanvasSize.width/2-this._p_threeD_initialMargin.left,top:-i.y+this.threeDCanvasSize.height/2-this._p_threeD_initialMargin.top}:void 0})}.apply(t,r),!(void 0!==i&&(e.exports=i))},function(t){t.exports=e},function(e){e.exports=t},function(e,t,n){var r;r=function(){"use strict";var e={newClass:function(e,t){t=t||{};var n=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.apply(this,t)};return n.prototype=t,n.prototype.constructor=n,n},newSubclass:function(e,t,n){n=n||{};var r=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];t.apply(this,[e.prototype.constructor].concat(n))};return r.prototype=Object.create(e.prototype,n),r.prototype.constructor=r,r},extend:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.forEach(function(t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}),e},field:function(e){return function(t){return t[e]}},object:function(t,n){return e.isUndefined(t[n])&&(t[n]={}),t[n]},array:function(t,n){return e.isUndefined(t[n])&&(t[n]=[]),t[n]},pull:function(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n)},makeEmpty:function(e){for(;e.length>0;)e.pop()},bindA:function(e,t,n){return e.bind.apply(e,[t].concat(n))},bind:function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return e.bindA(t[n],t,r)},applyConstructor:function(e,t){var n=e.bind.apply(e,[null].concat(t));return new n},assert:function(e,t){if(!e)throw new Error(t||"Assertion failed")},isUndefined:function(e){return"undefined"==typeof e},isDefined:function(e){return"undefined"!=typeof e},objValues:function(e){return Object.keys(e).map(function(t){return e[t]})},makePositioned:function(e){"static"===e.css("position")&&e.css("position","relative")},defOr:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=0;r<t.length;r+=1)if(e.isDefined(t[r]))return t[r]},debounce:function(e,t,n){var r;return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a=function(){r=null,e.apply(n,i)};clearTimeout(r),r=setTimeout(a,t)}},eachAnimationFrame:function(e,t){function n(){e.apply(t),r||requestAnimationFrame(n)}var r=!1;return n(),function(){r=!0}},oncePerStack:function(e,t){var n=!0;return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];n&&(n=!1,setTimeout(function(){n=!0},0),e.apply(t,r))}},observable:function(e,t){var n=t,r=n.name,i=n.initial,o=n.validation,a=i;Object.defineProperty(e,r,{get:function(){return a},set:function(e){var t=a;o&&(e=o(e,t)),e!==t&&(a=e,this.trigger(r,e,t))}})},cached:function(t){function n(){var e=r;r=i(),a&&!o(r,e)&&a(r,e)}var r,i=t.retrieve,o=t.isEqual||function(e,t){return e===t};setTimeout(n,0);var a,s=e.oncePerStack(n),c=function(){return s(),r};return c.onChange=function(e){return a=e,c},c}};return e}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},function(e,t,n){var r,i;r=[n(2)],i=function(e){"use strict";e.CSS3DObject=function(t){e.Object3D.call(this),this.element=t,this.element.style.position="absolute",this.addEventListener("removed",function(){null!==this.element.parentNode&&this.element.parentNode.removeChild(this.element)})},e.CSS3DObject.prototype=Object.create(e.Object3D.prototype),e.CSS3DSprite=function(t){e.CSS3DObject.call(this,t)},e.CSS3DSprite.prototype=Object.create(e.CSS3DObject.prototype),e.CSS3DRenderer=function(){console.log("THREE.CSS3DRenderer",e.REVISION);var t,n,r,i,o=new e.Matrix4,a={camera:{fov:0,style:""},objects:{}},s=document.createElement("div");s.style.overflow="hidden",s.style.WebkitTransformStyle="preserve-3d",s.style.MozTransformStyle="preserve-3d",s.style.oTransformStyle="preserve-3d",s.style.transformStyle="preserve-3d",this.domElement=s;var c=document.createElement("div");c.style.WebkitTransformStyle="preserve-3d",c.style.MozTransformStyle="preserve-3d",c.style.oTransformStyle="preserve-3d",c.style.transformStyle="preserve-3d",s.appendChild(c),this.setClearColor=function(){},this.setSize=function(e,o){t=e,n=o,r=t/2,i=n/2,s.style.width=e+"px",s.style.height=o+"px",c.style.width=e+"px",c.style.height=o+"px"};var h=function(e){return Math.abs(e)<1e-6?0:e},p=function(e){var t=e.elements;return"matrix3d("+h(t[0])+","+h(-t[1])+","+h(t[2])+","+h(t[3])+","+h(t[4])+","+h(-t[5])+","+h(t[6])+","+h(t[7])+","+h(t[8])+","+h(-t[9])+","+h(t[10])+","+h(t[11])+","+h(t[12])+","+h(-t[13])+","+h(t[14])+","+h(t[15])+")"},d=function(e){var t=e.elements;return"translate3d(-50%,-50%,0) matrix3d("+h(t[0])+","+h(t[1])+","+h(t[2])+","+h(t[3])+","+h(-t[4])+","+h(-t[5])+","+h(-t[6])+","+h(-t[7])+","+h(t[8])+","+h(t[9])+","+h(t[10])+","+h(t[11])+","+h(t[12])+","+h(t[13])+","+h(t[14])+","+h(t[15])+")"},l=function(t,n){if(t instanceof e.CSS3DObject){var r;t instanceof e.CSS3DSprite?(o.copy(n.matrixWorldInverse),o.transpose(),o.copyPosition(t.matrixWorld),o.scale(t.scale),o.elements[3]=0,o.elements[7]=0,o.elements[11]=0,o.elements[15]=1,r=d(o)):r=d(t.matrixWorld);var i=t.element,s=a.objects[t.id];(void 0===s||s!==r)&&(i.style.WebkitTransform=r,i.style.MozTransform=r,i.style.oTransform=r,i.style.transform=r,a.objects[t.id]=r),i.parentNode!==c&&c.appendChild(i)}for(var h=0,p=t.children.length;p>h;h++)l(t.children[h],n)};this.render=function(t,o){var h=.5/Math.tan(e.Math.degToRad(.5*o.fov))*n;a.camera.fov!==h&&(s.style.WebkitPerspective=h+"px",s.style.MozPerspective=h+"px",s.style.oPerspective=h+"px",s.style.perspective=h+"px",a.camera.fov=h),t.updateMatrixWorld(),void 0===o.parent&&o.updateMatrixWorld(),o.matrixWorldInverse.getInverse(o.matrixWorld);var d="translate3d(0,0,"+h+"px)"+p(o.matrixWorldInverse)+" translate3d("+r+"px,"+i+"px, 0)";a.camera.style!==d&&(c.style.WebkitTransform=d,c.style.MozTransform=d,c.style.oTransform=d,c.style.transform=d,a.camera.style=d),l(t,o)}}}.apply(t,r),!(void 0!==i&&(e.exports=i))},function(e,t,n){var r,i;r=[n(2)],i=function(e){"use strict";e.TrackballControls=function(t,n){function r(e){switch(e.keyCode){case 38:case 87:k.y=N;break;case 37:case 65:k.x=-N;break;case 40:case 83:k.y=-N;break;case 39:case 68:k.x=N}}function i(e){switch(e.keyCode){case 38:case 87:k.y=0;break;case 37:case 65:k.x=0;break;case 40:case 83:k.y=0;break;case 39:case 68:k.x=0}}function o(e){l.enabled!==!1&&(v===u.NONE&&(v=e.button),v!==u.ROTATE||l.noRotate?v!==u.ZOOM||l.noZoom?v!==u.PAN||l.noPan||(S.copy(z(e.pageX,e.pageY)),x.copy(S)):(b.copy(z(e.pageX,e.pageY)),w.copy(b)):(y.copy(T(e.pageX,e.pageY)),D.copy(y)),document.addEventListener("mousemove",a,!1),document.addEventListener("mouseup",s,!1),l.dispatchEvent(O))}function a(e){l.enabled!==!1&&(v!==u.ROTATE||l.noRotate?v!==u.ZOOM||l.noZoom?v!==u.PAN||l.noPan||x.copy(z(e.pageX,e.pageY)):w.copy(z(e.pageX,e.pageY)):D.copy(T(e.pageX,e.pageY)))}function s(){l.enabled!==!1&&(v=u.NONE,document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",s),l.dispatchEvent(M))}function c(e){if(l.enabled!==!1){e.preventDefault(),e.stopPropagation();var t=0;e.wheelDelta?t=e.wheelDelta/40:e.detail&&(t=-e.detail/3),b.y+=.01*t,l.dispatchEvent(O),l.dispatchEvent(M)}}function h(e){if(l.enabled!==!1){switch(e.touches.length){case 1:v=u.TOUCH_ROTATE,y.copy(T(e.touches[0].pageX,e.touches[0].pageY)),D.copy(y);break;case 2:v=u.TOUCH_ZOOM_PAN;var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;E=C=Math.sqrt(t*t+n*n);var r=(e.touches[0].pageX+e.touches[1].pageX)/2,i=(e.touches[0].pageY+e.touches[1].pageY)/2;S.copy(z(r,i)),x.copy(S);break;default:v=u.NONE}l.dispatchEvent(O)}}function p(e){if(l.enabled!==!1)switch(e.touches.length){case 1:D.copy(T(e.touches[0].pageX,e.touches[0].pageY));break;case 2:var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;E=Math.sqrt(t*t+n*n);var r=(e.touches[0].pageX+e.touches[1].pageX)/2,i=(e.touches[0].pageY+e.touches[1].pageY)/2;x.copy(z(r,i));break;default:v=u.NONE}}function d(e){if(l.enabled!==!1){switch(e.touches.length){case 1:D.copy(T(e.touches[0].pageX,e.touches[0].pageY)),y.copy(D);break;case 2:C=E=0;var t=(e.touches[0].pageX+e.touches[1].pageX)/2,n=(e.touches[0].pageY+e.touches[1].pageY)/2;x.copy(z(t,n)),S.copy(x)}v=u.NONE,l.dispatchEvent(M)}}var l=this,u={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=t,this.domElement=void 0!==n?n:document,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.noRoll=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=[65,83,68],this.target=new e.Vector3;var f=1e-6,m=new e.Vector3,v=u.NONE,g=u.NONE,_=new e.Vector3,y=new e.Vector3,D=new e.Vector3,b=new e.Vector2,w=new e.Vector2,C=0,E=0,S=new e.Vector2,x=new e.Vector2;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone();var j={type:"change"},O={type:"start"},M={type:"end"};this.handleResize=function(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{var e=this.domElement.getBoundingClientRect(),t=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+window.pageXOffset-t.clientLeft,this.screen.top=e.top+window.pageYOffset-t.clientTop,this.screen.width=e.width,this.screen.height=e.height}},this.handleEvent=function(e){"function"==typeof this[e.type]&&this[e.type](e)};var z=function(){var t=new e.Vector2;return function(e,n){return t.set((e-l.screen.left)/l.screen.width,(n-l.screen.top)/l.screen.height),t}}(),T=function(){var t=new e.Vector3,n=new e.Vector3,r=new e.Vector3;return function(e,i){r.set((e-.5*l.screen.width-l.screen.left)/(.5*l.screen.width),(.5*l.screen.height+l.screen.top-i)/(.5*l.screen.height),0);var o=r.length();return l.noRoll?r.z=o<Math.SQRT1_2?Math.sqrt(1-o*o):.5/o:o>1?r.normalize():r.z=Math.sqrt(1-o*o),_.copy(l.object.position).sub(l.target),t.copy(l.object.up).setLength(r.y),t.add(n.copy(l.object.up).cross(_).setLength(r.x)),t.add(_.setLength(r.z)),t}}();this.rotateCamera=function(){var t=new e.Vector3,n=new e.Quaternion;return function(){var e=Math.acos(y.dot(D)/y.length()/D.length());e&&(t.crossVectors(y,D).normalize(),e*=l.rotateSpeed,n.setFromAxisAngle(t,-e),_.applyQuaternion(n),l.object.up.applyQuaternion(n),D.applyQuaternion(n),l.staticMoving?y.copy(D):(n.setFromAxisAngle(t,e*(l.dynamicDampingFactor-1)),y.applyQuaternion(n)))}}(),this.zoomCamera=function(){if(v===u.TOUCH_ZOOM_PAN){var e=C/E;C=E,_.multiplyScalar(e)}else{var e=1+(w.y-b.y)*l.zoomSpeed;1!==e&&e>0&&(_.multiplyScalar(e),l.staticMoving?b.copy(w):b.y+=(w.y-b.y)*this.dynamicDampingFactor)}},this.panCamera=function(){var t=new e.Vector2,n=new e.Vector3,r=new e.Vector3;return function(){t.copy(x).sub(S),t.lengthSq()&&(t.multiplyScalar(_.length()*l.panSpeed),r.copy(_).cross(l.object.up).setLength(t.x),r.add(n.copy(l.object.up).setLength(t.y)),l.object.position.add(r),l.target.add(r),l.staticMoving?S.copy(x):S.add(t.subVectors(x,S).multiplyScalar(l.dynamicDampingFactor)))}}(),this.setCameraDistance=function(e){l.object.position.normalize().multiplyScalar(e)},this.checkDistances=function(){l.noZoom&&l.noPan||(_.lengthSq()>l.maxDistance*l.maxDistance&&l.object.position.addVectors(l.target,_.setLength(l.maxDistance)),_.lengthSq()<l.minDistance*l.minDistance&&l.object.position.addVectors(l.target,_.setLength(l.minDistance)))},this.update=function(){_.subVectors(l.object.position,l.target),l.noRotate||l.rotateCamera(),l.noZoom||l.zoomCamera(),l.noPan||l.panCamera(),l.object.position.addVectors(l.target,_),l.checkDistances(),l.object.lookAt(l.target),m.distanceToSquared(l.object.position)>f&&(l.dispatchEvent(j),m.copy(l.object.position))},this.reset=function(){v=u.NONE,g=u.NONE,l.target.copy(l.target0),l.object.position.copy(l.position0),l.object.up.copy(l.up0),_.subVectors(l.object.position,l.target),l.object.lookAt(l.target),l.dispatchEvent(j),m.copy(l.object.position)};var k=new e.Vector3,N=5;this.domElement.addEventListener("contextmenu",function(e){e.preventDefault()},!1),this.domElement.addEventListener("mousedown",o,!1),this.domElement.addEventListener("mousewheel",c,!1),this.domElement.addEventListener("DOMMouseScroll",c,!1),this.domElement.addEventListener("touchstart",h,!1),this.domElement.addEventListener("touchend",d,!1),this.domElement.addEventListener("touchmove",p,!1),window.addEventListener("keydown",r,!1),window.addEventListener("keyup",i,!1),this.handleResize(),this.update()},e.TrackballControls.prototype=Object.create(e.EventDispatcher.prototype)}.apply(t,r),!(void 0!==i&&(e.exports=i))},function(e,t,n){var r=n(7);"string"==typeof r&&(r=[[e.id,r,""]]);n(8)(r)},function(e,t,n){t=e.exports=n(9)(),t.push([e.id,".three-d-canvas>div>div{display:block;position:absolute;top:0;left:0;right:0;bottom:0;margin:0;z-index:0;pointer-events:none;}.three-d-canvas>div>div>.circuitboard{pointer-events:visible;}.three-d-canvas>div>canvas{display:block;position:absolute;top:0;left:0;right:0;bottom:0;margin:0;z-index:1;pointer-events:none;}",""])},function(e){function t(e){for(var t=0;t<e.length;t++){var n=e[t],i=o[n.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](n.parts[a]);for(;a<n.parts.length;a++)i.parts.push(r(n.parts[a]))}else{for(var s=[],a=0;a<n.parts.length;a++)s.push(r(n.parts[a]));o[n.id]={id:n.id,refs:1,parts:s}}}}function n(e){for(var t=[],n={},r=0;r<e.length;r++){var i=e[r],o=i[0],a=i[1],s=i[2],c={css:a,media:s};n[o]?n[o].parts.push(c):t.push(n[o]={id:o,parts:[c]})}return t}function r(e){var t=document.createElement("style"),n=document.head||document.getElementsByTagName("head")[0];return t.type="text/css",n.appendChild(t),i(t,e),function(r){if(r){if(r.css===e.css&&r.media===e.media)return;i(t,e=r)}else n.removeChild(t)}}function i(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var o={};e.exports=function(e){var r=n(e);return t(r),function(e){for(var i=[],a=0;a<r.length;a++){var s=r[a],c=o[s.id];c.refs--,i.push(c)}if(e){var h=n(e);t(h)}for(var a=0;a<i.length;a++){var c=i[a];if(0===c.refs){for(var p=0;p<c.parts.length;p++)c.parts[p]();delete o[c.id]}}}}},function(e){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];e.push(n[2]?"@media "+n[2]+"{"+n[1]+"}":n[1])}return e.join("")},e}}])});
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("jquery"),require("bluebird"));else if("function"==typeof define&&define.amd)define(["jquery","bluebird"],t);else{var r="object"==typeof exports?t(require("jquery"),require("bluebird")):t(e.jQuery,e.P);for(var i in r)("object"==typeof exports?exports:e)[i]=r[i]}}(this,function(e,t){return function(e){function t(i){if(r[i])return r[i].exports;var n=r[i]={exports:{},id:i,loaded:!1};return e[i].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){var i,n;i=[r(1),r(2),r(4),r(3)],n=function(e,t){"use strict";e.circuitboard.plugin({name:"circuitboard-core","if":!0,"modify circuitboard":{"add _p_circuitboardCore_tilesByModelId":{},"add _registerTile":function(e){this._p_circuitboardCore_tilesByModelId[e.model.id]||(this._p_circuitboardCore_tilesByModelId[e.model.id]=[]),this._p_circuitboardCore_tilesByModelId[e.model.id].push(e),this.trigger("tilecreated",e)},"add onTileCreated":function(r,i){e.isUndefined(arguments[1])&&(i=arguments[0],r=null);var n=null;r?"string"==typeof r&&(n=function(e){return e.model.id===r}):n=function(){return t.resolve(!0)},e.each(this._p_circuitboardCore_tilesByModelId,function(t,r){e.each(r,function(e,t){n(t)&&i(t)})}),this.on("tilecreated",function(e){n(e)&&i(e)})},"insert constructor":function(){var t=this;e("<div/>").appendTo(this.element).css("flex-grow",1).tilemap({model:this.options.model,parent:this}).tilemap("instance").then(function(e){t.one("destroy",function(){e.destroy()})})}}})}.apply(t,i),!(void 0!==n&&(e.exports=n))},function(t){t.exports=e},function(e){e.exports=t},function(e,t,r){var i,n;i=[r(1)],n=function(e){"use strict";e.circuitboard||(e.circuitboard={prematurePlugins:[],plugin:function(t){e.circuitboard.prematurePlugins.push(t)}})}.apply(t,i),!(void 0!==n&&(e.exports=n))},function(e,t,r){var i=r(5);"string"==typeof i&&(i=[e.id,i,""]);r(6)(i)},function(e,t,r){t=e.exports=r(7)(),t.push([e.id,".circuitboard{display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:stretch;-ms-flex-align:stretch;align-items:stretch;padding:0;}",""])},function(e){function t(e){for(var t=0;t<e.length;t++){var r=e[t],n=o[r.id];if(n){n.refs++;for(var s=0;s<n.parts.length;s++)n.parts[s](r.parts[s]);for(;s<r.parts.length;s++)n.parts.push(i(r.parts[s]))}else{for(var d=[],s=0;s<r.parts.length;s++)d.push(i(r.parts[s]));o[r.id]={id:r.id,refs:1,parts:d}}}}function r(e){for(var t=[],r={},i=0;i<e.length;i++){var n=e[i],o=n[0],s=n[1],d=n[2],u={css:s,media:d};r[o]?r[o].parts.push(u):t.push(r[o]={id:o,parts:[u]})}return t}function i(e){var t=document.createElement("style"),r=document.head||document.getElementsByTagName("head")[0];return t.type="text/css",r.appendChild(t),n(t,e),function(i){if(i){if(i.css===e.css&&i.media===e.media)return;n(t,e=i)}else r.removeChild(t)}}function n(e,t){var r=t.css,i=t.media;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var o={};e.exports=function(e){var i=r(e);return t(i),function(e){for(var n=[],s=0;s<i.length;s++){var d=i[s],u=o[d.id];u.refs--,n.push(u)}if(e){var a=r(e);t(a)}for(var s=0;s<n.length;s++){var u=n[s];if(0===u.refs){for(var c=0;c<u.parts.length;c++)u.parts[c]();delete o[u.id]}}}}},function(e){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var r=this[t];e.push(r[2]?"@media "+r[2]+"{"+r[1]+"}":r[1])}return e.join("")},e}}])});
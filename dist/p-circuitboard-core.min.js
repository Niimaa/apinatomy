!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("jquery"),require("bluebird"));else if("function"==typeof define&&define.amd)define(["jquery","bluebird"],t);else{var o="object"==typeof exports?t(require("jquery"),require("bluebird")):t(e.jQuery,e.P);for(var r in o)("object"==typeof exports?exports:e)[r]=o[r]}}(this,function(e,t){return function(e){function t(r){if(o[r])return o[r].exports;var i=o[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var o={};return t.m=e,t.c=o,t.p="",t(0)}([function(e,t,o){var r,i;r=[o(1),o(2),o(4),o(3)],i=function(e,t){"use strict";var o=e.circuitboard.plugin({name:"circuitboard-core","if":!0}).modify("Circuitboard.prototype");o.add("_registerTile",function(e){this._p_circuitboardCore_tilesByModelId[e.model.id]||(this._p_circuitboardCore_tilesByModelId[e.model.id]=[]),this._p_circuitboardCore_tilesByModelId[e.model.id].push(e),this.trigger("tilecreated",e)}),o.add("onTileCreated",function(o,r){e.isUndefined(arguments[1])&&(r=arguments[0],o=null);var i=null;o?"string"==typeof o&&(i=function(e){return e.model.id===o}):i=function(){return t.resolve(!0)},e.each(this._p_circuitboardCore_tilesByModelId,function(t,o){e.each(o,function(e,t){i(t)&&r(t)})}),this.on("tilecreated",function(e){i(e)&&r(e)})}),o.add("construct",function(){var t=this;this._p_circuitboardCore_tilesByModelId={},e("<div/>").appendTo(this.element).css("flex-grow",1).tilemap({model:this.options.model,parent:this}).tilemap("instance").then(function(e){t.one("destroy",function(){e.destroy()})})})}.apply(t,r),!(void 0!==i&&(e.exports=i))},function(t){t.exports=e},function(e){e.exports=t},function(e,t,o){var r,i;r=[o(1)],i=function(e){e.fn.extend({clickNotDrop:function(t){return this.each(function(){var o=this;e(this).on("mousedown",function(){var r=function(){e(window).off("mouseup",i)},i=function(i){e(window).off("mousemove",r),i.stopImmediatePropagation(),t.call(o,i)};e(window).one("mousemove",r),e(window).one("mouseup",i)})})},mouseDragDrop:function(t,o){return this.each(function(){var r=this;e(this).on("mousedown",function(i){var n=function(o){e(r).data("mouseDragDrop-dragging",!0),t.call(r,o)},s=function(t){e(window).off("mousemove",n),e(r).data("mouseDragDrop-dragging")&&o.call(r,t)};i.stopPropagation(),e(window).one("mousemove",n),e(window).one("mouseup",s),e(r).data("mouseDragDrop-dragging",!1)})})},offClickNotDrop:function(){return e(this).off("mousedown")},offMouseDragDrop:function(){return e(this).off("mousedown")}})}.apply(t,r),!(void 0!==i&&(e.exports=i))},function(e,t,o){var r=o(5);"string"==typeof r&&(r=[[e.id,r,""]]);o(6)(r)},function(e,t,o){t=e.exports=o(7)(),t.push([e.id,".circuitboard{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:stretch;-webkit-align-items:stretch;-ms-flex-align:stretch;align-items:stretch;padding:0;}",""])},function(e){function t(e){for(var t=0;t<e.length;t++){var o=e[t],i=n[o.id];if(i){i.refs++;for(var s=0;s<i.parts.length;s++)i.parts[s](o.parts[s]);for(;s<o.parts.length;s++)i.parts.push(r(o.parts[s]))}else{for(var a=[],s=0;s<o.parts.length;s++)a.push(r(o.parts[s]));n[o.id]={id:o.id,refs:1,parts:a}}}}function o(e){for(var t=[],o={},r=0;r<e.length;r++){var i=e[r],n=i[0],s=i[1],a=i[2],u={css:s,media:a};o[n]?o[n].parts.push(u):t.push(o[n]={id:n,parts:[u]})}return t}function r(e){var t=document.createElement("style"),o=document.head||document.getElementsByTagName("head")[0];return t.type="text/css",o.appendChild(t),i(t,e),function(r){if(r){if(r.css===e.css&&r.media===e.media)return;i(t,e=r)}else o.removeChild(t)}}function i(e,t){var o=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}var n={};e.exports=function(e){var r=o(e);return t(r),function(e){for(var i=[],s=0;s<r.length;s++){var a=r[s],u=n[a.id];u.refs--,i.push(u)}if(e){var d=o(e);t(d)}for(var s=0;s<i.length;s++){var u=i[s];if(0===u.refs){for(var f=0;f<u.parts.length;f++)u.parts[f]();delete n[u.id]}}}}},function(e){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var o=this[t];e.push(o[2]?"@media "+o[2]+"{"+o[1]+"}":o[1])}return e.join("")},e}}])});
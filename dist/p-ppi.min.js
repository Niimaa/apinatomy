!function(e,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n(require("jquery"),require("./D3Group.js"),require("./D3Vertex.js"),require("./D3Edge.js"),require("baconjs"),require("tweenjs"),require("bacon.model"),require("bacon.jquery"),require("bluebird"));else if("function"==typeof define&&define.amd)define(["jquery","./D3Group.js","./D3Vertex.js","./D3Edge.js","baconjs","tweenjs","bacon.model","bacon.jquery","bluebird"],n);else{var t="object"==typeof exports?n(require("jquery"),require("./D3Group.js"),require("./D3Vertex.js"),require("./D3Edge.js"),require("baconjs"),require("tweenjs"),require("bacon.model"),require("bacon.jquery"),require("bluebird")):n(e.jQuery,e["./D3Group.js"],e["./D3Vertex.js"],e["./D3Edge.js"],e.Bacon,e.TWEEN,e["bacon.model"],e["bacon.jquery"],e.P);for(var r in t)("object"==typeof exports?exports:e)[r]=t[r]}}(this,function(e,n,t,r,o,i,u,a,s){return function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){var r,o;r=[t(1),t(2),t(3),t(4),t(5),t(10)],o=function(e,n,t,r,o){"use strict";var i=e.circuitboard.plugin({name:"ppi",requires:["d3"]});i.insert("Tile.prototype.construct",function(){var e=this,i=new n({parent:this,gravityFactor:1,chargeFactor:.1,linkDistanceFactor:.3});o.mergeAll([o.once(),this.on("size").changes(),this.on("position").changes()]).onValue(function(){var n=5;i.setRegion({top:e.position.top+n,left:e.position.left+n,height:e.size.height-2*n,width:e.size.width-2*n})});var u=function(){i.addEdge(new r({parent:i,source:i.addVertex(new t({parent:i,cssClass:"example"})),target:i.addVertex(new t({parent:i,cssClass:"example"})),cssClass:"example"}))};this.on("open").not().and(this.on("visible")).onValue(function(e){e?u():i.removeAllEdgesAndVertices()})})}.apply(n,r),!(void 0!==o&&(e.exports=o))},function(n){n.exports=e},function(e){e.exports=n},function(e){e.exports=t},function(e){e.exports=r},function(e,n,t){var r,o;r=[t(1),t(13),t(6),t(7)],o=function(e,n,r,o){t(8),t(9),r.fromOnNull=n.memoize(function(e,n){return r.fromBinder(function(t){return e.on(n,function(e){t(new r.Next(e))}),function(){e.on(n,null)}})});var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};return r.animationFrames=function(){return r.fromBinder(function(e){var n=!0;return function t(){i(function(){e()===r.noMore&&(n=!1),n&&t()})}(),function(){n=!1}})},r.tween=function(e,n,t){var i=t,u=i.duration,a=i.delay,s=i.easing,c=new o.Tween(e).to(n,u),f=new r.Bus,p=function(){var e=0;return function(n){e+=1,f.plug(n),n.onEnd(function(){e-=1,0===e&&f.end()})}}();return p(r.fromBinder(function(e){s&&c.easing(s),a&&c.delay(a),c.onUpdate(function(){var n=this;e(new r.Next(function(){return n}))}),c.onComplete(function(){e(new r.End)})})),f.tween=c,f.start=function(){return c.start(),f},f.chain=function(e){return p(e),c.chain(e.tween),f},f},r.keyPress=function(n){return e(window).asEventStream("keypress").filter(function(e){return e.keyCode===n})},r.limiter=function(e){var t=void 0!==arguments[1]?arguments[1]:n.call,o=new r.Bus,i=new r.Bus,u=new r.Bus;return e.filter(o.toProperty(!1)).onValue(t,function(){i.push(),o.push(!1),u.push()}),function(e){var n=(void 0!==arguments[1]?arguments[1]:{}).buffer;return o.plug(e.map(!0)),u.startWith(!0).flatMapLatest(function(){var t=function(e,t){return n?e.concat([t]):[t]};return e.takeUntil(i).reduce([],t).flatMap(r.fromArray)})}},r.Observable.prototype.limitedBy=function(e,n){return e(this,n)},r.EventStream.prototype.holdUntil=function(e){var n=this;return r.fromBinder(function(t){var o=[],i=n.onValue(function(e){o.push(new r.Next(function(){return e}))}),u=e.onValue(function(){if(o.length>0){var e=o;o=[],t(e)}});return function(){i(),u(),o=null}})},r.Observable.prototype.value=function(e,n){return n=n||function(n){return n===e},this.skipDuplicates().filter(n)},r.Observable.prototype.run=function(){return this.subscribe(function(){})},r.EventStream.prototype.skipPropagation=function(e){return this.filter(function(t){return!n.array(t.originalEvent,"_onlyOnceFor")[e]}).map(function(t){n.array(t.originalEvent,"_onlyOnceFor")[e]=!0})},r.EventStream.prototype.which=function(e){var n="function"==typeof e?e:function(n){return n===e};return this.filter(function(e){return n(e.which)})},e.fn.mouseDrag=function(){var n=(void 0!==arguments[0]?arguments[0]:{}).threshold;return e(this).asEventStream("mousedown").flatMap(function(t){var r=e(document).asEventStream("mousemove");if(n){var o=!1;r=r.filter(function(e){if(o)return!0;var r=t.pageX-e.pageX,i=t.pageY-e.pageY;return r*r+i*i>n*n?o=!0:!1})}return r.takeUntil(e(document).asEventStream("mouseup")).map(function(e){return{mouseDownEvent:t,mouseMoveEvent:e}})})},e.fn.mouseClick=function(){var n=(void 0!==arguments[0]?arguments[0]:{}).threshold;return e(this).asEventStream("mousedown").flatMap(function(t){var r=e(document).asEventStream("mousemove");if(n){var o=!1;r=r.filter(function(e){if(o)return!0;var r=t.pageX-e.pageX,i=t.pageY-e.pageY;return r*r+i*i>n*n?o=!0:!1})}return e(document).asEventStream("mouseup").take(1).takeUntil(r)})},e.fn.mouseWheel=function(){return e(this).asEventStream("mousewheel DOMMouseScroll")},r}.apply(n,r),!(void 0!==o&&(e.exports=o))},function(e){e.exports=o},function(e){e.exports=i},function(e){e.exports=u},function(e){e.exports=a},function(e,n,t){var r=t(11);"string"==typeof r&&(r=[[e.id,r,""]]);t(12)(r,{})},function(e,n,t){n=e.exports=t(15)(),n.push([e.id,".circuitboard>svg.d3 .example.vertex>.core{pointer-events:visiblePainted;fill:#e600e6;stroke:purple;}.circuitboard>svg.d3 .example.edge{pointer-events:visiblePainted;cursor:pointer;stroke:purple;stroke-width:2px;stroke-linecap:round;}",""])},function(e){function n(e,n){for(var t=0;t<e.length;t++){var r=e[t],i=s[r.id];if(i){i.refs++;for(var u=0;u<i.parts.length;u++)i.parts[u](r.parts[u]);for(;u<r.parts.length;u++)i.parts.push(o(r.parts[u],n))}else{for(var a=[],u=0;u<r.parts.length;u++)a.push(o(r.parts[u],n));s[r.id]={id:r.id,refs:1,parts:a}}}}function t(e){for(var n=[],t={},r=0;r<e.length;r++){var o=e[r],i=o[0],u=o[1],a=o[2],s=o[3],c={css:u,media:a,sourceMap:s};t[i]?t[i].parts.push(c):n.push(t[i]={id:i,parts:[c]})}return n}function r(){var e=document.createElement("style"),n=p();return e.type="text/css",n.appendChild(e),e}function o(e,n){var t,o,i;if(n.singleton){var s=d++;t=l||(l=r()),o=u.bind(null,t,s,!1),i=u.bind(null,t,s,!0)}else t=r(),o=a.bind(null,t),i=function(){t.parentNode.removeChild(t)};return o(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;o(e=n)}else i()}}function i(e,n,t){var r=["/** >>"+n+" **/","/** "+n+"<< **/"],o=e.lastIndexOf(r[0]),i=t?r[0]+t+r[1]:"";if(e.lastIndexOf(r[0])>=0){var u=e.lastIndexOf(r[1])+r[1].length;return e.slice(0,o)+i+e.slice(u)}return e+i}function u(e,n,t,r){var o=t?"":r.css;if(e.styleSheet)e.styleSheet.cssText=i(e.styleSheet.cssText,n,o);else{var u=document.createTextNode(o),a=e.childNodes;a[n]&&e.removeChild(a[n]),a.length?e.insertBefore(u,a[n]):e.appendChild(u)}}function a(e,n){var t=n.css,r=n.media,o=n.sourceMap;if(o&&"function"==typeof btoa)try{t+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(JSON.stringify(o))+" */",t='@import url("data:stylesheet/css;base64,'+btoa(t)+'")'}catch(i){}if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}var s={},c=function(e){var n;return function(){return"undefined"==typeof n&&(n=e.apply(this,arguments)),n}},f=c(function(){return/msie 9\b/.test(window.navigator.userAgent.toLowerCase())}),p=c(function(){return document.head||document.getElementsByTagName("head")[0]}),l=null,d=0;e.exports=function(e,r){r=r||{},"undefined"==typeof r.singleton&&(r.singleton=f());var o=t(e);return n(o,r),function(e){for(var i=[],u=0;u<o.length;u++){var a=o[u],c=s[a.id];c.refs--,i.push(c)}if(e){var f=t(e);n(f,r)}for(var u=0;u<i.length;u++){var c=i[u];if(0===c.refs){for(var p=0;p<c.parts.length;p++)c.parts[p]();delete s[c.id]}}}}},function(e,n,t){var r,o;r=[t(14)],o=function(e){"use strict";var n={newClass:function(e){var n=void 0!==arguments[1]?arguments[1]:{};return e.prototype=n,e.prototype.constructor=e,e},newSubclass:function(e,t){var r=void 0!==arguments[2]?arguments[2]:{},o=t(e.prototype.constructor);return o.prototype=Object.create(e.prototype),n.extend(o.prototype,r),o.prototype.constructor=o,o},extend:function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];return n.forEach(function(n){for(var t in n)n.hasOwnProperty(t)&&Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}),e},field:function(e){return function(n){return n[e]}},call:function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];return e.apply(void 0,n)},id:function(e){return e},getDef:function(e,t,r){return n.isUndefined(e[t])&&("function"==typeof r&&(r=r()),e[t]=r),e[t]},object:function(e,t){return n.getDef(e,t,{})},array:function(e,t){return n.getDef(e,t,[])},pull:function(e,n){var t=e.indexOf(n);-1!==t&&e.splice(t)},makeEmpty:function(e){for(;e.length>0;)e.pop()},bindA:function(e,n,t){return e.bind.apply(e,[n].concat(t))},bind:function(e,t){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];return n.bindA(e[t],e,r)},applyConstructor:function(e,n){var t=e.bind.apply(e,[null].concat(n));return new t},assert:function(e,n){if(!e)throw new Error(n||"Assertion failed")},isUndefined:function(e){return"undefined"==typeof e},isDefined:function(e){return"undefined"!=typeof e},isPlainObject:function(e){return"object"==typeof e&&e.constructor===Object},isFunction:function(e){return"function"==typeof e},objValues:function(e){return Object.keys(e).map(function(n){return e[n]})},makePositioned:function(e){"static"===e.css("position")&&e.css("position","relative")},defOr:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0;r<e.length;r+=1)if(n.isDefined(e[r]))return e[r]},debounce:function(e,n,t){var r;return function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var u=this,a=function(){r=null,e.apply(t||u,o)};clearTimeout(r),r=setTimeout(a,n)}},oncePerStack:function(e,n){var t=!0,r=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];t&&(t=!1,setTimeout(function(){t=!0},0),e.apply(n||this,r))};return r.allowAdditionalCall=function(){t=!0},r},cached:function(e){function t(){var e=o(),n=u;i(e,n)||(u=e,c.forEach(function(t){return t(e,n)}))}var r=e,o=r.retrieve,i=r.isEqual;i=i||function(e,n){return e===n};var u,a=n.oncePerStack(t),s=function(){return a(),u},c=[];return s.onChange=function(e){return c.push(e),s},s.allowAdditionalCall=function(){a.allowAdditionalCall()},a(),s},promisify:function(n,t){return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return new e(function(e,o){try{n[t].apply(n,r.concat(e))}catch(i){o(i)}})}},findIndex:function(e,n){for(var t=0;t<e.length;++t)if(n(e[t],t,e))return t;return-1},memoize:function(e){var t=[],r=[];return function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var u=n.findIndex(t,function(e){return e.every(function(e,n){return e===o[n]})});if(u>=0)return r[u];var a=e.apply(this,o);return t.push(o),r.push(a),a}}},t=1e-6,r=function(e,n){return e>n-t&&n+t>e};return n.Position=n.newClass(function(e,n){this.top=e,this.left=n}),n.Position.subtract=function(e,t){return new n.Position(e.top-t.top,e.left-t.left)},n.Position.equals=function(e,t){return n.isDefined(e)&&n.isDefined(t)&&r(e.top,t.top)&&r(e.left,t.left)},n.Size=n.newClass(function(e,n){this.height=e,this.width=n}),n.Size.equals=function(e,t){return n.isDefined(e)&&n.isDefined(t)&&r(e.height,t.height)&&r(e.width,t.width)},n}.apply(n,r),!(void 0!==o&&(e.exports=o))},function(e){e.exports=s},function(e){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],n=0;n<this.length;n++){var t=this[n];e.push(t[2]?"@media "+t[2]+"{"+t[1]+"}":t[1])}return e.join("")},e}}])});